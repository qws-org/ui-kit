import{$ as h,a as m,b as s,c as g}from"./platform-BAdLVq7s.js";import{r as v}from"./index-D4lIrffr.js";import{$ as w}from"./context-HS_7-J2N.js";import{d as y}from"./useSelectableItem-DQ22AzUs.js";function _(e){if(x())e.focus({preventScroll:!0});else{let t=E(e);e.focus(),L(t)}}let i=null;function x(){if(i==null){i=!1;try{document.createElement("div").focus({get preventScroll(){return i=!0,!0}})}catch{}}return i}function E(e){let t=e.parentNode,l=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&l.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&l.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),l}function L(e){for(let{element:t,scrollTop:l,scrollLeft:r}of e)t.scrollTop=l,t.scrollLeft=r}const A=v.createContext({isNative:!0,open:p,useHref:e=>e});function b(){return v.useContext(A)}function a(e,t,l=!0){var r,n;let{metaKey:o,ctrlKey:c,altKey:f,shiftKey:u}=t;h()&&(!((n=window.event)===null||n===void 0||(r=n.type)===null||r===void 0)&&r.startsWith("key"))&&e.target==="_blank"&&(s()?o=!0:c=!0);let $=m()&&s()&&!g()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:o,ctrlKey:c,altKey:f,shiftKey:u}):new MouseEvent("click",{metaKey:o,ctrlKey:c,altKey:f,shiftKey:u,bubbles:!0,cancelable:!0});a.isOpening=l,_(e),e.dispatchEvent($),a.isOpening=!1}a.isOpening=!1;function T(e,t){if(e instanceof HTMLAnchorElement)t(e);else if(e.hasAttribute("data-href")){let l=document.createElement("a");l.href=e.getAttribute("data-href"),e.hasAttribute("data-target")&&(l.target=e.getAttribute("data-target")),e.hasAttribute("data-rel")&&(l.rel=e.getAttribute("data-rel")),e.hasAttribute("data-download")&&(l.download=e.getAttribute("data-download")),e.hasAttribute("data-ping")&&(l.ping=e.getAttribute("data-ping")),e.hasAttribute("data-referrer-policy")&&(l.referrerPolicy=e.getAttribute("data-referrer-policy")),e.appendChild(l),t(l),e.removeChild(l)}}function p(e,t){T(e,l=>a(l,t))}function P(e){let t=b();var l;const r=t.useHref((l=e.href)!==null&&l!==void 0?l:"");return{"data-href":e.href?r:void 0,"data-target":e.target,"data-rel":e.rel,"data-download":e.download,"data-ping":e.ping,"data-referrer-policy":e.referrerPolicy}}function R(e){let t=b();var l;const r=t.useHref((l=e==null?void 0:e.href)!==null&&l!==void 0?l:"");return{href:e!=null&&e.href?r:void 0,target:e==null?void 0:e.target,rel:e==null?void 0:e.rel,download:e==null?void 0:e.download,ping:e==null?void 0:e.ping,referrerPolicy:e==null?void 0:e.referrerPolicy}}let d=new Map;function W(e){let{locale:t}=w(),l=t+(e?Object.entries(e).sort((n,o)=>n[0]<o[0]?-1:1).join():"");if(d.has(l))return d.get(l);let r=new Intl.Collator(t,e);return d.set(l,r),r}class K{getItemRect(t){let l=this.ref.current;if(!l)return null;let r=t!=null?y(this.ref,t):null;if(!r)return null;let n=l.getBoundingClientRect(),o=r.getBoundingClientRect();return{x:o.left-n.left+l.scrollLeft,y:o.top-n.top+l.scrollTop,width:o.width,height:o.height}}getContentSize(){let t=this.ref.current;var l,r;return{width:(l=t==null?void 0:t.scrollWidth)!==null&&l!==void 0?l:0,height:(r=t==null?void 0:t.scrollHeight)!==null&&r!==void 0?r:0}}getVisibleRect(){let t=this.ref.current;var l,r,n,o;return{x:(l=t==null?void 0:t.scrollLeft)!==null&&l!==void 0?l:0,y:(r=t==null?void 0:t.scrollTop)!==null&&r!==void 0?r:0,width:(n=t==null?void 0:t.offsetWidth)!==null&&n!==void 0?n:0,height:(o=t==null?void 0:t.offsetHeight)!==null&&o!==void 0?o:0}}constructor(t){this.ref=t}}export{W as $,R as a,b,_ as c,K as d,P as e};
