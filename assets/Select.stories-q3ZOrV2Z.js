import{j as f}from"./jsx-runtime-BO8uF4Og.js";import{r as g,R as x}from"./index-D4H_InIO.js";import{B as oe}from"./Button-Bp_GwmiL.js";import{F as re}from"./Flex-Colc0XVJ.js";import{P as se}from"./Popover-BscmzwZk.js";import{B as de}from"./Box-CjIIFAwH.js";import{T as ce}from"./Typography-Dq2wpANC.js";import{l as le,k as M,n as z,A as ue,B as me,z as ie,$ as H,q as fe}from"./useFocus-CgYBR30T.js";import{b as T,e as pe}from"./useFocusable-CMHRg9rf.js";import{$ as be,a as ve,b as ge,c as he,d as ye}from"./useMenuTrigger-DdI6U5_Q.js";import{d as $e,f as Se}from"./useSelectableItem-BZpOY1DC.js";import{$ as xe}from"./useFocusWithin-DR07ZYpu.js";import{a as Pe,$ as we}from"./useField-D9D6f-j8.js";import{$ as De,a as Fe,b as Ce}from"./useFormValidation-DsorJLxy.js";import{a as Oe}from"./Overlay-CvQAKytZ.js";import{$ as Ve}from"./useSingleSelectListState-Bq7BdRPx.js";import{$ as Be}from"./DOMLayoutDelegate-BeVqlZGt.js";import{$ as _e}from"./VisuallyHidden-CsyuHRxB.js";import{$ as ke}from"./Item-CgDplN8L.js";function qe(e){let t=Oe(e),[i,r]=g.useState(null),o=Ve({...e,onSelectionChange:l=>{e.onSelectionChange!=null&&e.onSelectionChange(l),t.close(),n.commitValidation()}}),n=De({...e,value:o.selectedKey}),[a,c]=g.useState(!1),[s]=g.useState(o.selectedKey);var u;return{...n,...o,...t,defaultSelectedKey:(u=e.defaultSelectedKey)!==null&&u!==void 0?u:s,focusStrategy:i,open(l=null){o.collection.size!==0&&(r(l),t.open())},toggle(l=null){o.collection.size!==0&&(r(l),t.toggle())},isFocused:a,setFocused:c}}const I=new WeakMap;function Ke(e){return typeof e=="string"?e.replace(/\s*/g,""):""+e}function Re(e,t){let i=I.get(e);if(!i)throw new Error("Unknown list");return`${i.id}-option-${Ke(t)}`}function Me(e,t,i){let r=T(e,{labelable:!0}),o=e.selectionBehavior||"toggle",n=e.linkBehavior||(o==="replace"?"action":"override");o==="toggle"&&n==="action"&&(n="override");let{listProps:a}=be({...e,ref:i,selectionManager:t.selectionManager,collection:t.collection,disabledKeys:t.disabledKeys,linkBehavior:n}),{focusWithinProps:c}=xe({onFocusWithin:e.onFocus,onBlurWithin:e.onBlur,onFocusWithinChange:e.onFocusChange}),s=le(e.id);I.set(t,{id:s,shouldUseVirtualFocus:e.shouldUseVirtualFocus,shouldSelectOnPressUp:e.shouldSelectOnPressUp,shouldFocusOnHover:e.shouldFocusOnHover,isVirtualized:e.isVirtualized,onAction:e.onAction,linkBehavior:n});let{labelProps:u,fieldProps:l}=Pe({...e,id:s,labelElementType:"span"});return{labelProps:u,listBoxProps:M(r,c,t.selectionManager.selectionMode==="multiple"?{"aria-multiselectable":"true"}:{},{role:"listbox",...M(l,a)})}}function Ae(e,t,i){var r,o;let{key:n}=e,a=I.get(t);var c;let s=(c=e.isDisabled)!==null&&c!==void 0?c:t.selectionManager.isDisabled(n);var u;let l=(u=e.isSelected)!==null&&u!==void 0?u:t.selectionManager.isSelected(n);var p;let v=(p=e.shouldSelectOnPressUp)!==null&&p!==void 0?p:a==null?void 0:a.shouldSelectOnPressUp;var d;let y=(d=e.shouldFocusOnHover)!==null&&d!==void 0?d:a==null?void 0:a.shouldFocusOnHover;var P;let A=(P=e.shouldUseVirtualFocus)!==null&&P!==void 0?P:a==null?void 0:a.shouldUseVirtualFocus;var O;let N=(O=e.isVirtualized)!==null&&O!==void 0?O:a==null?void 0:a.isVirtualized,w=z(),W=z(),$={role:"option","aria-disabled":s||void 0,"aria-selected":t.selectionManager.selectionMode!=="none"?l:void 0};ue()&&me()||($["aria-label"]=e["aria-label"],$["aria-labelledby"]=w,$["aria-describedby"]=W);let b=t.collection.getItem(n);if(N){let F=Number(b==null?void 0:b.index);$["aria-posinset"]=Number.isNaN(F)?void 0:F+1,$["aria-setsize"]=ve(t.collection)}let h=a!=null&&a.onAction?()=>{var F;return a==null||(F=a.onAction)===null||F===void 0?void 0:F.call(a,n)}:void 0,V=Re(t,n),{itemProps:m,isPressed:B,isFocused:D,hasAction:_,allowsSelection:k}=$e({selectionManager:t.selectionManager,key:n,ref:i,shouldSelectOnPressUp:v,allowsDifferentPressOrigin:v&&y,isVirtualized:N,shouldUseVirtualFocus:A,isDisabled:s,onAction:h||!(b==null||(r=b.props)===null||r===void 0)&&r.onAction?ie(b==null||(o=b.props)===null||o===void 0?void 0:o.onAction,h):void 0,linkBehavior:a==null?void 0:a.linkBehavior,id:V}),{hoverProps:S}=ge({isDisabled:s||!y,onHoverStart(){H()||(t.selectionManager.setFocused(!0),t.selectionManager.setFocusedKey(n))}}),L=T(b==null?void 0:b.props);delete L.id;let ne=pe(b==null?void 0:b.props);return{optionProps:{...$,...M(L,m,S,ne),id:V},labelProps:{id:w},descriptionProps:{id:W},isFocused:D,isFocusVisible:D&&t.selectionManager.isFocused&&H(),isSelected:l,isDisabled:s,isPressed:B,allowsSelection:k,hasAction:_}}const U=new WeakMap;function Ne(e,t,i){let{keyboardDelegate:r,isDisabled:o,isRequired:n,name:a,form:c,validationBehavior:s="aria"}=e,u=Be({usage:"search",sensitivity:"base"}),l=g.useMemo(()=>r||new he(t.collection,t.disabledKeys,i,u),[r,t.collection,t.disabledKeys,u,i]),{menuTriggerProps:p,menuProps:v}=ye({isDisabled:o,type:"listbox"},t,i),d=m=>{switch(m.key){case"ArrowLeft":{var B,D;m.preventDefault();let S=t.selectedKey!=null?(B=l.getKeyAbove)===null||B===void 0?void 0:B.call(l,t.selectedKey):(D=l.getFirstKey)===null||D===void 0?void 0:D.call(l);S&&t.setSelectedKey(S);break}case"ArrowRight":{var _,k;m.preventDefault();let S=t.selectedKey!=null?(_=l.getKeyBelow)===null||_===void 0?void 0:_.call(l,t.selectedKey):(k=l.getFirstKey)===null||k===void 0?void 0:k.call(l);S&&t.setSelectedKey(S);break}}},{typeSelectProps:y}=Se({keyboardDelegate:l,selectionManager:t.selectionManager,onTypeSelect(m){t.setSelectedKey(m)}}),{isInvalid:P,validationErrors:A,validationDetails:O}=t.displayValidation,{labelProps:N,fieldProps:w,descriptionProps:W,errorMessageProps:$}=we({...e,labelElementType:"span",isInvalid:P,errorMessage:e.errorMessage||A});y.onKeyDown=y.onKeyDownCapture,delete y.onKeyDownCapture;let b=T(e,{labelable:!0}),h=M(y,p,w),V=le();return U.set(t,{isDisabled:o,isRequired:n,name:a,form:c,validationBehavior:s}),{labelProps:{...N,onClick:()=>{if(!e.isDisabled){var m;(m=i.current)===null||m===void 0||m.focus(),fe("keyboard")}}},triggerProps:M(b,{...h,isDisabled:o,onKeyDown:ie(h.onKeyDown,d,e.onKeyDown),onKeyUp:e.onKeyUp,"aria-labelledby":[V,h["aria-labelledby"],h["aria-label"]&&!h["aria-labelledby"]?h.id:null].filter(Boolean).join(" "),onFocus(m){t.isFocused||(e.onFocus&&e.onFocus(m),e.onFocusChange&&e.onFocusChange(!0),t.setFocused(!0))},onBlur(m){t.isOpen||(e.onBlur&&e.onBlur(m),e.onFocusChange&&e.onFocusChange(!1),t.setFocused(!1))}}),valueProps:{id:V},menuProps:{...v,autoFocus:t.focusStrategy||!0,shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,disallowEmptySelection:!0,linkBehavior:"selection",onBlur:m=>{m.currentTarget.contains(m.relatedTarget)||(e.onBlur&&e.onBlur(m),e.onFocusChange&&e.onFocusChange(!1),t.setFocused(!1))},"aria-labelledby":[w["aria-labelledby"],h["aria-label"]&&!w["aria-labelledby"]?h.id:null].filter(Boolean).join(" ")},descriptionProps:W,errorMessageProps:$,isInvalid:P,validationErrors:A,validationDetails:O,hiddenSelectProps:{isDisabled:o,name:a,label:e.label,state:t,triggerRef:i,form:c}}}function We(e,t,i){let r=U.get(t)||{},{autoComplete:o,name:n=r.name,form:a=r.form,isDisabled:c=r.isDisabled}=e,{validationBehavior:s,isRequired:u}=r,{visuallyHiddenProps:l}=_e({style:{position:"fixed",top:0,left:0}});Fe(e.selectRef,t.defaultSelectedKey,t.setSelectedKey),Ce({validationBehavior:s,focus:()=>{var d;return(d=i.current)===null||d===void 0?void 0:d.focus()}},t,e.selectRef);let p=g.useCallback(d=>t.setSelectedKey(d.currentTarget.value),[t.setSelectedKey]);var v;return{containerProps:{...l,"aria-hidden":!0,"data-react-aria-prevent-focus":!0,"data-a11y-ignore":"aria-hidden-focus"},inputProps:{style:{display:"none"}},selectProps:{tabIndex:-1,autoComplete:o,disabled:c,required:s==="native"&&u,name:n,form:a,value:(v=t.selectedKey)!==null&&v!==void 0?v:"",onChange:p,onInput:p}}}function je(e){let{state:t,triggerRef:i,label:r,name:o,form:n,isDisabled:a}=e,c=g.useRef(null),s=g.useRef(null),{containerProps:u,selectProps:l}=We({...e,selectRef:t.collection.size<=300?c:s},t,i);if(t.collection.size<=300)return x.createElement("div",{...u,"data-testid":"hidden-select-container"},x.createElement("label",null,r,x.createElement("select",{...l,ref:c},x.createElement("option",null),[...t.collection.getKeys()].map(v=>{let d=t.collection.getItem(v);if(d&&d.type==="item")return x.createElement("option",{key:d.key,value:d.key},d.textValue)}))));if(o){let v=U.get(t)||{},{validationBehavior:d}=v;var p;let y={type:"hidden",autoComplete:l.autoComplete,name:o,form:n,disabled:a,value:(p=t.selectedKey)!==null&&p!==void 0?p:""};return d==="native"?x.createElement("input",{...y,ref:s,style:{display:"none"},type:"text",required:l.required,onChange:()=>{}}):x.createElement("input",{...y,ref:s})}return null}const Ee=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:12,height:8,fill:"none",...e,children:f.jsx("path",{fill:"#fff",fillOpacity:.5,fillRule:"evenodd",d:"M.793 1.043a1 1 0 0 1 1.414 0L6 4.836l3.793-3.793a1 1 0 0 1 1.414 1.414l-4.5 4.5a1 1 0 0 1-1.414 0l-4.5-4.5a1 1 0 0 1 0-1.414",clipRule:"evenodd"})});try{ArrowDown.displayName="ArrowDown",ArrowDown.__docgenInfo={description:"",displayName:"ArrowDown",props:{}}}catch{}const j=function({item:e,state:t}){const i=g.useRef(null),{optionProps:r,isDisabled:o}=Ae({key:e.key},t,i);return f.jsx(de,{as:"li",ref:i,bg:o?"surface-neutral-subtle":"background-transparent",className:"cursor-pointer outline-none",...r,style:{padding:10},onClick:()=>t.selectionManager.toggleSelection(e.key),children:f.jsx(ce,{color:"text-primary-default",children:e.rendered})})};try{j.displayName="SelectOption",j.__docgenInfo={description:"",displayName:"SelectOption",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"Node<T>"}},state:{defaultValue:null,description:"",name:"state",required:!0,type:{name:"ListState<T>"}}}}}catch{}const E=g.forwardRef(function(e,t){const i=g.useRef(null),r=t!=null?t:i,{state:o,minWidth:n="auto",maxWidth:a="auto"}=e,{listBoxProps:c}=Me(e,o,r);return f.jsx("ul",{...c,ref:r,style:{width:"100%",padding:0,margin:0,minWidth:n,maxWidth:a},className:`bg-[var(--colors-background-transparent)] rounded overflow-hidden ${e.className}`,children:[...o.collection].map(s=>f.jsx(j,{item:s,state:o},s.key))})});try{E.displayName="SelectOptionList",E.__docgenInfo={description:"",displayName:"SelectOptionList",props:{state:{defaultValue:null,description:"",name:"state",required:!0,type:{name:"ListState<unknown>"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},minWidth:{defaultValue:null,description:"",name:"minWidth",required:!1,type:{name:"number"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"number"}}}}}catch{}const C=function(e){var u;let t=e.items;const i=typeof t[0]=="string"||typeof t[0]=="number";i&&(t=t.map(l=>({id:l})));const o={...e,items:t,onSelectionChange:l=>{const p=JSON.parse(String(l));e.onChange(i?p.id:p)},children:l=>{var v,d;const p=i?l.id:(d=(v=e.getOptionLabel)==null?void 0:v.call(e,l))!=null?d:String(l.name);return f.jsx(ke,{children:String(p)},JSON.stringify(l))}},n=qe(o),a=g.useRef(null),{triggerProps:c,menuProps:s}=Ne(o,n,a);return f.jsxs(f.Fragment,{children:[f.jsx(je,{isDisabled:e.disabled,state:n,triggerRef:a,label:e.emptyText,name:e.name}),f.jsx(oe,{className:`${e.className}`,size:"small",variant:"secondary",...c,ref:a,p:{px:12,py:10},minWidth:e.minWidth,maxWidth:e.maxWidth,onPress:()=>{n.isOpen||n.toggle()},children:f.jsxs(re,{width:"100%",gap:10,align:"center",justify:"space-between",children:[n.selectedItem?n.selectedItem.rendered:(u=e.emptyText)!=null?u:"Select an option",f.jsx(Ee,{width:"12",height:"8",viewBox:"0 0 12 8"})]})}),n.isOpen&&f.jsx(se,{state:n,triggerRef:a,placement:"bottom start",children:f.jsx(E,{minWidth:162,...s,state:n})})]})};try{C.displayName="Select",C.__docgenInfo={description:"",displayName:"Select",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"Elem"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: T) => void"}},getOptionLabel:{defaultValue:null,description:"",name:"getOptionLabel",required:!1,type:{name:"((value: T) => ReactNode)"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"T[]"}},emptyText:{defaultValue:null,description:"",name:"emptyText",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string | number"}},minWidth:{defaultValue:null,description:"",name:"minWidth",required:!1,type:{name:"string | number"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"string | number"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"string | number"}},minHeight:{defaultValue:null,description:"",name:"minHeight",required:!1,type:{name:"string | number"}},maxHeight:{defaultValue:null,description:"",name:"maxHeight",required:!1,type:{name:"string | number"}},p:{defaultValue:null,description:"",name:"p",required:!1,type:{name:"any"}},m:{defaultValue:null,description:"",name:"m",required:!1,type:{name:"any"}}}}}catch{}const Te={title:"UI-Kit components/Select",component:C,argTypes:{emptyText:{control:"text",description:"Текст, который отобразится в случае если не выбран ни 1 элемент"},getOptionLabel:{control:"object",description:"Функция которая позволяет выводить кастомные поля для описания опции, либо же кастомизировать реализацию самой опции"},items:{description:"Список элементов которые отображаются в выпадающем списке"}}},q={render:()=>{const e=[{id:1,name:"Aerospace"},{id:2,name:"Mechanical"},{id:3,name:"Civil"},{id:4,name:"Biomedical"},{id:5,name:"Nuclear"},{id:6,name:"Industrial"},{id:7,name:"Chemical"},{id:8,name:"Agricultural"},{id:9,name:"Electrical"}],[t,i]=g.useState();return f.jsx(C,{value:t,onChange:i,items:e,"aria-label":"select"})}},K={render:()=>{const e=[{id:1,label:"Aerospace"},{id:2,label:"Mechanical"},{id:3,label:"Civil"},{id:4,label:"Biomedical"}],[t,i]=g.useState(e[0]);return f.jsx(C,{value:t,onChange:i,items:e,"aria-label":"select",getOptionLabel:r=>r.label})}},R={render:()=>{const e=["1","2","3"],[t,i]=g.useState(e[0]);return f.jsx(C,{value:t,onChange:i,items:e,"aria-label":"select",getOptionLabel:r=>r})}};var J,G,Q;q.parameters={...q.parameters,docs:{...(J=q.parameters)==null?void 0:J.docs,source:{originalSource:`{
  render: () => {
    const options: Array<Option> = [{
      id: 1,
      name: "Aerospace"
    }, {
      id: 2,
      name: "Mechanical"
    }, {
      id: 3,
      name: "Civil"
    }, {
      id: 4,
      name: "Biomedical"
    }, {
      id: 5,
      name: "Nuclear"
    }, {
      id: 6,
      name: "Industrial"
    }, {
      id: 7,
      name: "Chemical"
    }, {
      id: 8,
      name: "Agricultural"
    }, {
      id: 9,
      name: "Electrical"
    }];
    const [state, setState] = useState<Option>();
    return <Select value={state} onChange={setState} items={options} aria-label={"select"} />;
  }
}`,...(Q=(G=q.parameters)==null?void 0:G.docs)==null?void 0:Q.source}}};var X,Y,Z;K.parameters={...K.parameters,docs:{...(X=K.parameters)==null?void 0:X.docs,source:{originalSource:`{
  render: () => {
    const options: Array<Option2> = [{
      id: 1,
      label: "Aerospace"
    }, {
      id: 2,
      label: "Mechanical"
    }, {
      id: 3,
      label: "Civil"
    }, {
      id: 4,
      label: "Biomedical"
    }];
    const [state, setState] = useState<Option2>(options[0]);
    return <Select value={state} onChange={setState} items={options} aria-label={"select"} getOptionLabel={v => v.label} />;
  }
}`,...(Z=(Y=K.parameters)==null?void 0:Y.docs)==null?void 0:Z.source}}};var ee,te,ae;R.parameters={...R.parameters,docs:{...(ee=R.parameters)==null?void 0:ee.docs,source:{originalSource:`{
  render: () => {
    const options: Array<string> = ["1", "2", "3"];
    const [state, setState] = useState<string>(options[0]);
    return <Select value={state} onChange={setState} items={options} aria-label={"select"} getOptionLabel={v => v} />;
  }
}`,...(ae=(te=R.parameters)==null?void 0:te.docs)==null?void 0:ae.source}}};const Ie=["Default","WithCustomStructure","WithElementaryList"],dt=Object.freeze(Object.defineProperty({__proto__:null,Default:q,WithCustomStructure:K,WithElementaryList:R,__namedExportsOrder:Ie,default:Te},Symbol.toStringTag,{value:"Module"}));export{q as D,dt as s};
