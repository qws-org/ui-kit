import{j as f}from"./jsx-runtime-D_zvdyIk.js";import{r as b,R as F}from"./index-D4lIrffr.js";import{$ as q,c as te,d as ae,b as U}from"./mergeProps-BZNQxkBP.js";import{$ as E}from"./filterDOMProps-CeZl_uWj.js";import{$ as oe,a as re,b as se,c as de,d as ce}from"./useSelectableList-CIvweun7.js";import{g as ue,e as me}from"./useSelectableItem-DQ22AzUs.js";import{m as pe,$ as L}from"./useFocus-DvfpPP1Y.js";import{$ as fe,a as be}from"./DOMLayoutDelegate-D025XxFm.js";import{$ as ve,a as ge,b as ye}from"./useField-Cqr_UoFf.js";import{$ as he,a as $e}from"./useFormValidation-Q-SgiexM.js";import{$ as xe}from"./VisuallyHidden-C9c9jqDY.js";import{B as Se}from"./Button-fk38tfQ5.js";import{F as Pe}from"./Flex-DKJ3EBQ7.js";import{P as Fe}from"./Popover-BCY-JSxE.js";import{$ as we}from"./useFocusWithin-Di0NsHIX.js";import{b as _e,a as De}from"./platform-BAdLVq7s.js";import{B as Oe}from"./Box-QZ3qyQqy.js";import{T as Ce}from"./Typography-DQsLHEyZ.js";import{$ as Ve}from"./Overlay-CCJpmfyJ.js";import{$ as Be}from"./useSingleSelectListState-HyHKrJUw.js";import{$ as ke}from"./Item-Uk9RLypc.js";function Me(e){let t=Ve(e),[n,r]=b.useState(null),o=Be({...e,onSelectionChange:i=>{e.onSelectionChange!=null&&e.onSelectionChange(i),t.close(),l.commitValidation()}}),l=he({...e,value:o.selectedKey}),[a,p]=b.useState(!1),d=b.useMemo(()=>{var i;return o.collection.size===0||o.collection.size===1&&((i=o.collection.getItem(o.collection.getFirstKey()))===null||i===void 0?void 0:i.type)==="loader"},[o.collection]);return{...l,...o,...t,focusStrategy:n,open(i=null){d||(r(i),t.open())},toggle(i=null){d||(r(i),t.toggle())},isFocused:a,setFocused:p}}const Ke=e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:12,height:8,fill:"none",...e,children:f.jsx("path",{fill:"#fff",fillOpacity:.5,fillRule:"evenodd",d:"M.793 1.043a1 1 0 0 1 1.414 0L6 4.836l3.793-3.793a1 1 0 0 1 1.414 1.414l-4.5 4.5a1 1 0 0 1-1.414 0l-4.5-4.5a1 1 0 0 1 0-1.414",clipRule:"evenodd"})});try{ArrowDown.displayName="ArrowDown",ArrowDown.__docgenInfo={description:"",displayName:"ArrowDown",props:{}}}catch{}const ie=new WeakMap;function qe(e,t,n){let{keyboardDelegate:r,isDisabled:o,isRequired:l,name:a,validationBehavior:p="aria"}=e,d=fe({usage:"search",sensitivity:"base"}),i=b.useMemo(()=>r||new oe(t.collection,t.disabledKeys,n,d),[r,t.collection,t.disabledKeys,d,n]),{menuTriggerProps:u,menuProps:c}=re({isDisabled:o,type:"listbox"},t,n),y=m=>{switch(m.key){case"ArrowLeft":{var C,V;m.preventDefault();let h=t.selectedKey!=null?(C=i.getKeyAbove)===null||C===void 0?void 0:C.call(i,t.selectedKey):(V=i.getFirstKey)===null||V===void 0?void 0:V.call(i);h&&t.setSelectedKey(h);break}case"ArrowRight":{var S,B;m.preventDefault();let h=t.selectedKey!=null?(S=i.getKeyBelow)===null||S===void 0?void 0:S.call(i,t.selectedKey):(B=i.getFirstKey)===null||B===void 0?void 0:B.call(i);h&&t.setSelectedKey(h);break}}},{typeSelectProps:v}=ue({keyboardDelegate:i,selectionManager:t.selectionManager,onTypeSelect(m){t.setSelectedKey(m)}}),{isInvalid:_,validationErrors:$,validationDetails:N}=t.displayValidation,{labelProps:D,fieldProps:x,descriptionProps:R,errorMessageProps:A}=ve({...e,labelElementType:"span",isInvalid:_,errorMessage:e.errorMessage||$});v.onKeyDown=v.onKeyDownCapture,delete v.onKeyDownCapture;let g=E(e,{labelable:!0}),s=q(v,u,x),O=te();return ie.set(t,{isDisabled:o,isRequired:l,name:a,validationBehavior:p}),{labelProps:{...D,onClick:()=>{if(!e.isDisabled){var m;(m=n.current)===null||m===void 0||m.focus(),pe("keyboard")}}},triggerProps:q(g,{...s,isDisabled:o,onKeyDown:ae(s.onKeyDown,y,e.onKeyDown),onKeyUp:e.onKeyUp,"aria-labelledby":[O,s["aria-labelledby"],s["aria-label"]&&!s["aria-labelledby"]?s.id:null].filter(Boolean).join(" "),onFocus(m){t.isFocused||(e.onFocus&&e.onFocus(m),e.onFocusChange&&e.onFocusChange(!0),t.setFocused(!0))},onBlur(m){t.isOpen||(e.onBlur&&e.onBlur(m),e.onFocusChange&&e.onFocusChange(!1),t.setFocused(!1))}}),valueProps:{id:O},menuProps:{...c,autoFocus:t.focusStrategy||!0,shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,disallowEmptySelection:!0,linkBehavior:"selection",onBlur:m=>{m.currentTarget.contains(m.relatedTarget)||(e.onBlur&&e.onBlur(m),e.onFocusChange&&e.onFocusChange(!1),t.setFocused(!1))},"aria-labelledby":[x["aria-labelledby"],s["aria-label"]&&!x["aria-labelledby"]?s.id:null].filter(Boolean).join(" ")},descriptionProps:R,errorMessageProps:A,isInvalid:_,validationErrors:$,validationDetails:N}}function Re(e,t,n){let r=ie.get(t)||{},{autoComplete:o,name:l=r.name,isDisabled:a=r.isDisabled}=e,{validationBehavior:p,isRequired:d}=r,{visuallyHiddenProps:i}=xe();ge(e.selectRef,t.selectedKey,t.setSelectedKey),$e({validationBehavior:p,focus:()=>{var c;return(c=n.current)===null||c===void 0?void 0:c.focus()}},t,e.selectRef);var u;return{containerProps:{...i,"aria-hidden":!0,"data-react-aria-prevent-focus":!0,"data-a11y-ignore":"aria-hidden-focus"},inputProps:{style:{display:"none"}},selectProps:{tabIndex:-1,autoComplete:o,disabled:a,required:p==="native"&&d,name:l,value:(u=t.selectedKey)!==null&&u!==void 0?u:void 0,onChange:c=>t.setSelectedKey(c.target.value)}}}function Ae(e){let{state:t,triggerRef:n,label:r,name:o,isDisabled:l}=e,a=b.useRef(null),{containerProps:p,selectProps:d}=Re({...e,selectRef:a},t,n);var i;return t.collection.size<=300?F.createElement("div",{...p,"data-testid":"hidden-select-container"},F.createElement("label",null,r,F.createElement("select",{...d,ref:a},F.createElement("option",null),[...t.collection.getKeys()].map(u=>{let c=t.collection.getItem(u);if(c&&c.type==="item")return F.createElement("option",{key:c.key,value:c.key},c.textValue)})))):o?F.createElement("input",{type:"hidden",autoComplete:d.autoComplete,name:o,disabled:l,value:(i=t.selectedKey)!==null&&i!==void 0?i:""}):null}const I=new WeakMap;function Ne(e){return typeof e=="string"?e.replace(/\s*/g,""):""+e}function We(e,t){let n=I.get(e);if(!n)throw new Error("Unknown list");return`${n.id}-option-${Ne(t)}`}function je(e,t,n){let r=E(e,{labelable:!0}),o=e.selectionBehavior||"toggle",l=e.linkBehavior||(o==="replace"?"action":"override");o==="toggle"&&l==="action"&&(l="override");let{listProps:a}=se({...e,ref:n,selectionManager:t.selectionManager,collection:t.collection,disabledKeys:t.disabledKeys,linkBehavior:l}),{focusWithinProps:p}=we({onFocusWithin:e.onFocus,onBlurWithin:e.onBlur,onFocusWithinChange:e.onFocusChange}),d=te(e.id);I.set(t,{id:d,shouldUseVirtualFocus:e.shouldUseVirtualFocus,shouldSelectOnPressUp:e.shouldSelectOnPressUp,shouldFocusOnHover:e.shouldFocusOnHover,isVirtualized:e.isVirtualized,onAction:e.onAction,linkBehavior:l});let{labelProps:i,fieldProps:u}=ye({...e,id:d,labelElementType:"span"});return{labelProps:i,listBoxProps:q(r,p,t.selectionManager.selectionMode==="multiple"?{"aria-multiselectable":"true"}:{},{role:"listbox",...q(u,a)})}}function Ee(e,t,n){var r,o;let{key:l}=e,a=I.get(t);var p;let d=(p=e.isDisabled)!==null&&p!==void 0?p:t.selectionManager.isDisabled(l);var i;let u=(i=e.isSelected)!==null&&i!==void 0?i:t.selectionManager.isSelected(l);var c;let y=(c=e.shouldSelectOnPressUp)!==null&&c!==void 0?c:a==null?void 0:a.shouldSelectOnPressUp;var v;let _=(v=e.shouldFocusOnHover)!==null&&v!==void 0?v:a==null?void 0:a.shouldFocusOnHover;var $;let N=($=e.shouldUseVirtualFocus)!==null&&$!==void 0?$:a==null?void 0:a.shouldUseVirtualFocus;var D;let x=(D=e.isVirtualized)!==null&&D!==void 0?D:a==null?void 0:a.isVirtualized,R=U(),A=U(),g={role:"option","aria-disabled":d||void 0,"aria-selected":t.selectionManager.selectionMode!=="none"?u:void 0};_e()&&De()||(g["aria-label"]=e["aria-label"],g["aria-labelledby"]=R,g["aria-describedby"]=A);let s=t.collection.getItem(l);if(x){let P=Number(s==null?void 0:s.index);g["aria-posinset"]=Number.isNaN(P)?void 0:P+1,g["aria-setsize"]=de(t.collection)}let O=a!=null&&a.onAction?()=>{var P;return a==null||(P=a.onAction)===null||P===void 0?void 0:P.call(a,l)}:void 0,m=We(t,l),{itemProps:C,isPressed:V,isFocused:S,hasAction:B,allowsSelection:h}=me({selectionManager:t.selectionManager,key:l,ref:n,shouldSelectOnPressUp:y,allowsDifferentPressOrigin:y&&_,isVirtualized:x,shouldUseVirtualFocus:N,isDisabled:d,onAction:O||!(s==null||(r=s.props)===null||r===void 0)&&r.onAction?ae(s==null||(o=s.props)===null||o===void 0?void 0:o.onAction,O):void 0,linkBehavior:a==null?void 0:a.linkBehavior,id:m}),{hoverProps:le}=ce({isDisabled:d||!_,onHoverStart(){L()||(t.selectionManager.setFocused(!0),t.selectionManager.setFocusedKey(l))}}),T=E(s==null?void 0:s.props);delete T.id;let ne=be(s==null?void 0:s.props);return{optionProps:{...g,...q(T,C,le,ne),id:m},labelProps:{id:R},descriptionProps:{id:A},isFocused:S,isFocusVisible:S&&t.selectionManager.isFocused&&L(),isSelected:u,isDisabled:d,isPressed:V,allowsSelection:h,hasAction:B}}const W=function({item:e,state:t}){const n=b.useRef(null),{optionProps:r,isDisabled:o}=Ee({key:e.key},t,n);return f.jsx(Oe,{as:"li",ref:n,bg:o?"surface-neutral-subtle":"background-transparent",className:"cursor-pointer outline-none",...r,style:{padding:10},onClick:()=>t.selectionManager.toggleSelection(e.key),children:f.jsx(Ce,{color:"text-primary-default",children:e.rendered})})};try{W.displayName="SelectOption",W.__docgenInfo={description:"",displayName:"SelectOption",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"Node<T>"}},state:{defaultValue:null,description:"",name:"state",required:!0,type:{name:"ListState<T>"}}}}}catch{}const j=b.forwardRef(function(e,t){const n=b.useRef(null),r=t!=null?t:n,{state:o,minWidth:l="auto",maxWidth:a="auto"}=e,{listBoxProps:p}=je(e,o,r);return f.jsx("ul",{...p,ref:r,style:{width:"100%",padding:0,margin:0,minWidth:l,maxWidth:a},className:`bg-[var(--colors-background-transparent)] rounded overflow-hidden ${e.className}`,children:[...o.collection].map(d=>f.jsx(W,{item:d,state:o},d.key))})});try{j.displayName="SelectOptionList",j.__docgenInfo={description:"",displayName:"SelectOptionList",props:{state:{defaultValue:null,description:"",name:"state",required:!0,type:{name:"ListState<unknown>"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},minWidth:{defaultValue:null,description:"",name:"minWidth",required:!1,type:{name:"number"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"number"}}}}}catch{}const w=function(e){var i;let t=e.items;const n=typeof t[0]=="string"||typeof t[0]=="number";n&&(t=t.map(u=>({id:u})));const o={...e,items:t,onSelectionChange:u=>{const c=JSON.parse(String(u));e.onChange(n?c.id:c)},children:u=>{var y,v;const c=n?u.id:(v=(y=e.getOptionLabel)==null?void 0:y.call(e,u))!=null?v:String(u.name);return f.jsx(ke,{children:String(c)},JSON.stringify(u))}},l=Me(o),a=b.useRef(null),{triggerProps:p,menuProps:d}=qe(o,l,a);return f.jsxs(f.Fragment,{children:[f.jsx(Ae,{isDisabled:e.disabled,state:l,triggerRef:a,label:e.emptyText,name:e.name}),f.jsx(Se,{className:`${e.className}`,size:"small",variant:"secondary",...p,ref:a,p:{px:12,py:10},minWidth:e.minWidth,maxWidth:e.maxWidth,onPress:()=>{l.isOpen||l.toggle()},children:f.jsxs(Pe,{width:"100%",gap:10,align:"center",justify:"space-between",children:[l.selectedItem?l.selectedItem.rendered:(i=e.emptyText)!=null?i:"Select an option",f.jsx(Ke,{width:"12",height:"8",viewBox:"0 0 12 8"})]})}),l.isOpen&&f.jsx(Fe,{state:l,triggerRef:a,placement:"bottom start",children:f.jsx(j,{minWidth:162,...d,state:l})})]})};try{w.displayName="Select",w.__docgenInfo={description:"",displayName:"Select",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"Elem"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: T) => void"}},getOptionLabel:{defaultValue:null,description:"",name:"getOptionLabel",required:!1,type:{name:"((value: T) => ReactNode)"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"T[]"}},emptyText:{defaultValue:null,description:"",name:"emptyText",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string | number"}},minWidth:{defaultValue:null,description:"",name:"minWidth",required:!1,type:{name:"string | number"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"string | number"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"string | number"}},minHeight:{defaultValue:null,description:"",name:"minHeight",required:!1,type:{name:"string | number"}},maxHeight:{defaultValue:null,description:"",name:"maxHeight",required:!1,type:{name:"string | number"}},p:{defaultValue:null,description:"",name:"p",required:!1,type:{name:"any"}},m:{defaultValue:null,description:"",name:"m",required:!1,type:{name:"any"}}}}}catch{}const Ie={title:"UI-Kit components/Select",component:w,argTypes:{emptyText:{control:"text",description:"Текст, который отобразится в случае если не выбран ни 1 элемент"},getOptionLabel:{control:"object",description:"Функция которая позволяет выводить кастомные поля для описания опции, либо же кастомизировать реализацию самой опции"},items:{description:"Список элементов которые отображаются в выпадающем списке"}}},k={render:()=>{const e=[{id:1,name:"Aerospace"},{id:2,name:"Mechanical"},{id:3,name:"Civil"},{id:4,name:"Biomedical"},{id:5,name:"Nuclear"},{id:6,name:"Industrial"},{id:7,name:"Chemical"},{id:8,name:"Agricultural"},{id:9,name:"Electrical"}],[t,n]=b.useState();return f.jsx(w,{value:t,onChange:n,items:e,"aria-label":"select"})}},M={render:()=>{const e=[{id:1,label:"Aerospace"},{id:2,label:"Mechanical"},{id:3,label:"Civil"},{id:4,label:"Biomedical"}],[t,n]=b.useState(e[0]);return f.jsx(w,{value:t,onChange:n,items:e,"aria-label":"select",getOptionLabel:r=>r.label})}},K={render:()=>{const e=["1","2","3"],[t,n]=b.useState(e[0]);return f.jsx(w,{value:t,onChange:n,items:e,"aria-label":"select",getOptionLabel:r=>r})}};var z,H,J;k.parameters={...k.parameters,docs:{...(z=k.parameters)==null?void 0:z.docs,source:{originalSource:`{
  render: () => {
    const options: Array<Option> = [{
      id: 1,
      name: "Aerospace"
    }, {
      id: 2,
      name: "Mechanical"
    }, {
      id: 3,
      name: "Civil"
    }, {
      id: 4,
      name: "Biomedical"
    }, {
      id: 5,
      name: "Nuclear"
    }, {
      id: 6,
      name: "Industrial"
    }, {
      id: 7,
      name: "Chemical"
    }, {
      id: 8,
      name: "Agricultural"
    }, {
      id: 9,
      name: "Electrical"
    }];
    const [state, setState] = useState<Option>();
    return <Select value={state} onChange={setState} items={options} aria-label={"select"} />;
  }
}`,...(J=(H=k.parameters)==null?void 0:H.docs)==null?void 0:J.source}}};var G,Q,X;M.parameters={...M.parameters,docs:{...(G=M.parameters)==null?void 0:G.docs,source:{originalSource:`{
  render: () => {
    const options: Array<Option2> = [{
      id: 1,
      label: "Aerospace"
    }, {
      id: 2,
      label: "Mechanical"
    }, {
      id: 3,
      label: "Civil"
    }, {
      id: 4,
      label: "Biomedical"
    }];
    const [state, setState] = useState<Option2>(options[0]);
    return <Select value={state} onChange={setState} items={options} aria-label={"select"} getOptionLabel={v => v.label} />;
  }
}`,...(X=(Q=M.parameters)==null?void 0:Q.docs)==null?void 0:X.source}}};var Y,Z,ee;K.parameters={...K.parameters,docs:{...(Y=K.parameters)==null?void 0:Y.docs,source:{originalSource:`{
  render: () => {
    const options: Array<string> = ["1", "2", "3"];
    const [state, setState] = useState<string>(options[0]);
    return <Select value={state} onChange={setState} items={options} aria-label={"select"} getOptionLabel={v => v} />;
  }
}`,...(ee=(Z=K.parameters)==null?void 0:Z.docs)==null?void 0:ee.source}}};const Te=["Default","WithCustomStructure","WithElementaryList"],ut=Object.freeze(Object.defineProperty({__proto__:null,Default:k,WithCustomStructure:M,WithElementaryList:K,__namedExportsOrder:Te,default:Ie},Symbol.toStringTag,{value:"Module"}));export{k as D,ut as s};
