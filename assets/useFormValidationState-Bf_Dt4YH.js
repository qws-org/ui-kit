import{r}from"./index-D4lIrffr.js";const D={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},A={...D,customError:!0,valid:!1},d={isInvalid:!1,validationDetails:D,validationErrors:[]},L=r.createContext({}),g="__formValidationState"+Date.now();function j(e){if(e[g]){let{realtimeValidation:a,displayValidation:i,updateValidation:l,resetValidation:s,commitValidation:n}=e[g];return{realtimeValidation:a,displayValidation:i,updateValidation:l,resetValidation:s,commitValidation:n}}return O(e)}function O(e){let{isInvalid:a,validationState:i,name:l,value:s,builtinValidation:n,validate:f,validationBehavior:u="aria"}=e;i&&(a||(a=i==="invalid"));let v=a!==void 0?{isInvalid:a,validationErrors:[],validationDetails:A}:null,V=r.useMemo(()=>{if(!f||s==null)return null;let t=R(f,s);return h(t)},[f,s]);n!=null&&n.validationDetails.valid&&(n=void 0);let o=r.useContext(L),I=r.useMemo(()=>l?Array.isArray(l)?l.flatMap(t=>S(o[t])):S(o[l]):[],[o,l]),[C,T]=r.useState(o),[x,m]=r.useState(!1);o!==C&&(T(o),m(!1));let $=r.useMemo(()=>h(x?[]:I),[x,I]),M=r.useRef(d),[b,E]=r.useState(d),c=r.useRef(d),_=()=>{if(!w)return;p(!1);let t=V||n||M.current;y(t,c.current)||(c.current=t,E(t))},[w,p]=r.useState(!1);return r.useEffect(_),{realtimeValidation:v||$||V||n||d,displayValidation:u==="native"?v||$||b:v||$||V||n||b,updateValidation(t){u==="aria"&&!y(b,t)?E(t):M.current=t},resetValidation(){let t=d;y(t,c.current)||(c.current=t,E(t)),u==="native"&&p(!1),m(!0)},commitValidation(){u==="native"&&p(!0),m(!0)}}}function S(e){return e?Array.isArray(e)?e:[e]:[]}function R(e,a){if(typeof e=="function"){let i=e(a);if(i&&typeof i!="boolean")return S(i)}return[]}function h(e){return e.length?{isInvalid:!0,validationErrors:e,validationDetails:A}:null}function y(e,a){return e===a?!0:!!e&&!!a&&e.isInvalid===a.isInvalid&&e.validationErrors.length===a.validationErrors.length&&e.validationErrors.every((i,l)=>i===a.validationErrors[l])&&Object.entries(e.validationDetails).every(([i,l])=>a.validationDetails[i]===l)}export{j as $,g as a};
