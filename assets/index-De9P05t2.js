import{x as pe,k as de}from"./useFocus-CgYBR30T.js";import{a as he,b as me}from"./useFocusable-C_0kSj5S.js";import{a as ve,$ as ge,b as ke}from"./useFormValidation-CRkeO8jQ.js";import{$ as Ce}from"./useControlledState-Dxxc-Ijj.js";import{r as oe,R as we,b as Se,g as be}from"./index-D4H_InIO.js";import{$ as Ie}from"./useField-D9D6f-j8.js";import{r as Me}from"./index-BVDRNj0I.js";function Fe(s,M){let{inputElementType:Y="input",isDisabled:H=!1,isRequired:V=!1,isReadOnly:K=!1,type:Z="text",validationBehavior:P="aria"}=s,[F,B]=Ce(s.value,s.defaultValue||"",s.onChange),{focusableProps:_}=he(s,M),j=ve({...s,value:F}),{isInvalid:T,validationErrors:N,validationDetails:U}=j.displayValidation,{labelProps:w,fieldProps:$,descriptionProps:z,errorMessageProps:E}=Ie({...s,isInvalid:T,errorMessage:s.errorMessage||N}),W=me(s,{labelable:!0});const O={type:Z,pattern:s.pattern};let[G]=oe.useState(F);var x;return ge(M,(x=s.defaultValue)!==null&&x!==void 0?x:G,B),ke(s,j,M),oe.useEffect(()=>{if(M.current instanceof pe(M.current).HTMLTextAreaElement){let R=M.current;Object.defineProperty(R,"defaultValue",{get:()=>R.value,set:()=>{},configurable:!0})}},[M]),{labelProps:w,inputProps:de(W,Y==="input"?O:void 0,{disabled:H,readOnly:K,required:V&&P==="native","aria-required":V&&P==="aria"||void 0,"aria-invalid":T||void 0,"aria-errormessage":s["aria-errormessage"],"aria-activedescendant":s["aria-activedescendant"],"aria-autocomplete":s["aria-autocomplete"],"aria-haspopup":s["aria-haspopup"],"aria-controls":s["aria-controls"],value:F,onChange:R=>B(R.target.value),autoComplete:s.autoComplete,autoCapitalize:s.autoCapitalize,maxLength:s.maxLength,minLength:s.minLength,name:s.name,form:s.form,placeholder:s.placeholder,inputMode:s.inputMode,autoCorrect:s.autoCorrect,spellCheck:s.spellCheck,[parseInt(we.version,10)>=17?"enterKeyHint":"enterkeyhint"]:s.enterKeyHint,onCopy:s.onCopy,onCut:s.onCut,onPaste:s.onPaste,onCompositionEnd:s.onCompositionEnd,onCompositionStart:s.onCompositionStart,onCompositionUpdate:s.onCompositionUpdate,onSelect:s.onSelect,onBeforeInput:s.onBeforeInput,onInput:s.onInput,..._,...$}),descriptionProps:z,errorMessageProps:E,isInvalid:T,validationErrors:N,validationDetails:U}}var ee={exports:{}},te,re;function Oe(){if(re)return te;re=1;function s(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var M=s(Se()),Y=Me();function H(t,a){for(var o=Object.getOwnPropertyNames(a),n=0;n<o.length;n++){var e=o[n],i=Object.getOwnPropertyDescriptor(a,e);i&&i.configurable&&t[e]===void 0&&Object.defineProperty(t,e,i)}return t}function V(){return(V=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t}).apply(this,arguments)}function K(t,a){t.prototype=Object.create(a.prototype),H(t.prototype.constructor=t,a)}function Z(t,a){if(t==null)return{};var o,n,e={},i=Object.keys(t);for(n=0;n<i.length;n++)o=i[n],0<=a.indexOf(o)||(e[o]=t[o]);return e}function P(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var F=function(t,a,o,n,e,i,d,g){if(!t){var l;if(a===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[o,n,e,i,d,g],f=0;(l=new Error(a.replace(/%s/g,function(){return u[f++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}},B=F;function _(t,a,o){if("selectionStart"in t&&"selectionEnd"in t)t.selectionStart=a,t.selectionEnd=o;else{var n=t.createTextRange();n.collapse(!0),n.moveStart("character",a),n.moveEnd("character",o-a),n.select()}}function j(t){var a=0,o=0;if("selectionStart"in t&&"selectionEnd"in t)a=t.selectionStart,o=t.selectionEnd;else{var n=document.selection.createRange();n.parentElement()===t&&(a=-n.moveStart("character",-t.value.length),o=-n.moveEnd("character",-t.value.length))}return{start:a,end:o,length:o-a}}var T={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},N="_";function U(t,a,o){var n="",e="",i=null,d=[];if(a===void 0&&(a=N),o==null&&(o=T),!t||typeof t!="string")return{maskChar:a,formatChars:o,mask:null,prefix:null,lastEditablePosition:null,permanents:[]};var g=!1;return t.split("").forEach(function(l){g=!g&&l==="\\"||(g||!o[l]?(d.push(n.length),n.length===d.length-1&&(e+=l)):i=n.length+1,n+=l,!1)}),{maskChar:a,formatChars:o,prefix:e,mask:n,lastEditablePosition:i,permanents:d}}function w(t,a){return t.permanents.indexOf(a)!==-1}function $(t,a,o){var n=t.mask,e=t.formatChars;if(!o)return!1;if(w(t,a))return n[a]===o;var i=e[n[a]];return new RegExp(i).test(o)}function z(t,a){return a.split("").every(function(o,n){return w(t,n)||!$(t,n,o)})}function E(t,a){var o=t.maskChar,n=t.prefix;if(!o){for(;a.length>n.length&&w(t,a.length-1);)a=a.slice(0,a.length-1);return a.length}for(var e=n.length,i=a.length;i>=n.length;i--){var d=a[i];if(!w(t,i)&&$(t,i,d)){e=i+1;break}}return e}function W(t,a){return E(t,a)===t.mask.length}function O(t,a){var o=t.maskChar,n=t.mask,e=t.prefix;if(!o){for((a=x(t,"",a,0)).length<e.length&&(a=e);a.length<n.length&&w(t,a.length);)a+=n[a.length];return a}if(a)return x(t,O(t,""),a,0);for(var i=0;i<n.length;i++)w(t,i)?a+=n[i]:a+=o;return a}function G(t,a,o,n){var e=o+n,i=t.maskChar,d=t.mask,g=t.prefix,l=a.split("");if(i)return l.map(function(f,k){return k<o||e<=k?f:w(t,k)?d[k]:i}).join("");for(var u=e;u<l.length;u++)w(t,u)&&(l[u]="");return o=Math.max(g.length,o),l.splice(o,e-o),a=l.join(""),O(t,a)}function x(t,a,o,n){var e=t.mask,i=t.maskChar,d=t.prefix,g=o.split(""),l=W(t,a);return!i&&n>a.length&&(a+=e.slice(a.length,n)),g.every(function(u){for(;C=u,w(t,h=n)&&C!==e[h];){if(n>=a.length&&(a+=e[n]),f=u,k=n,i&&w(t,k)&&f===i)return!0;if(++n>=e.length)return!1}var f,k,h,C;return!$(t,n,u)&&u!==i||(n<a.length?a=i||l||n<d.length?a.slice(0,n)+u+a.slice(n+1):(a=a.slice(0,n)+u+a.slice(n),O(t,a)):i||(a+=u),++n<e.length)}),a}function R(t,a,o,n){var e=t.mask,i=t.maskChar,d=o.split(""),g=n;return d.every(function(l){for(;f=l,w(t,u=n)&&f!==e[u];)if(++n>=e.length)return!1;var u,f;return($(t,n,l)||l===i)&&n++,n<e.length}),n-g}function se(t,a){for(var o=a;0<=o;--o)if(!w(t,o))return o;return null}function q(t,a){for(var o=t.mask,n=a;n<o.length;++n)if(!w(t,n))return n;return null}function J(t){return t||t===0?t+"":""}function le(t,a,o,n,e){var i=t.mask,d=t.prefix,g=t.lastEditablePosition,l=a,u="",f=0,k=0,h=Math.min(e.start,o.start);return o.end>e.start?k=(f=R(t,n,u=l.slice(e.start,o.end),h))?e.length:0:l.length<n.length&&(k=n.length-l.length),l=n,k&&(k===1&&!e.length&&(h=e.start===o.start?q(t,o.start):se(t,o.start)),l=G(t,l,h,k)),l=x(t,l,u,h),(h+=f)>=i.length?h=i.length:h<d.length&&!f?h=d.length:h>=d.length&&h<g&&f&&(h=q(t,h)),u||(u=null),{value:l=O(t,l),enteredString:u,selection:{start:h,end:h}}}function ue(){var t=new RegExp("windows","i"),a=new RegExp("phone","i"),o=navigator.userAgent;return t.test(o)&&a.test(o)}function I(t){return typeof t=="function"}function ce(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame}function ne(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame}function ae(t){return(ne()?ce():function(){return setTimeout(t,1e3/60)})(t)}function Q(t){(ne()||clearTimeout)(t)}var fe=(function(t){function a(n){var e=t.call(this,n)||this;e.focused=!1,e.mounted=!1,e.previousSelection=null,e.selectionDeferId=null,e.saveSelectionLoopDeferId=null,e.saveSelectionLoop=function(){e.previousSelection=e.getSelection(),e.saveSelectionLoopDeferId=ae(e.saveSelectionLoop)},e.runSaveSelectionLoop=function(){e.saveSelectionLoopDeferId===null&&e.saveSelectionLoop()},e.stopSaveSelectionLoop=function(){e.saveSelectionLoopDeferId!==null&&(Q(e.saveSelectionLoopDeferId),e.saveSelectionLoopDeferId=null,e.previousSelection=null)},e.getInputDOMNode=function(){if(!e.mounted)return null;var r=Y.findDOMNode(P(P(e))),c=typeof window!="undefined"&&r instanceof window.Element;if(r&&!c)return null;if(r.nodeName!=="INPUT"&&(r=r.querySelector("input")),!r)throw new Error("react-input-mask: inputComponent doesn't contain input node");return r},e.getInputValue=function(){var r=e.getInputDOMNode();return r?r.value:null},e.setInputValue=function(r){var c=e.getInputDOMNode();c&&(e.value=r,c.value=r)},e.setCursorToEnd=function(){var r=E(e.maskOptions,e.value),c=q(e.maskOptions,r);c!==null&&e.setCursorPosition(c)},e.setSelection=function(r,c,m){m===void 0&&(m={});var p=e.getInputDOMNode(),v=e.isFocused();p&&v&&(m.deferred||_(p,r,c),e.selectionDeferId!==null&&Q(e.selectionDeferId),e.selectionDeferId=ae(function(){e.selectionDeferId=null,_(p,r,c)}),e.previousSelection={start:r,end:c,length:Math.abs(c-r)})},e.getSelection=function(){return j(e.getInputDOMNode())},e.getCursorPosition=function(){return e.getSelection().start},e.setCursorPosition=function(r){e.setSelection(r,r)},e.isFocused=function(){return e.focused},e.getBeforeMaskedValueChangeConfig=function(){var r=e.maskOptions,c=r.mask,m=r.maskChar,p=r.permanents,v=r.formatChars;return{mask:c,maskChar:m,permanents:p,alwaysShowMask:!!e.props.alwaysShowMask,formatChars:v}},e.isInputAutofilled=function(r,c,m,p){var v=e.getInputDOMNode();try{if(v.matches(":-webkit-autofill"))return!0}catch{}return!e.focused||p.end<m.length&&c.end===r.length},e.onChange=function(r){var c=P(P(e)).beforePasteState,m=P(P(e)).previousSelection,p=e.props.beforeMaskedValueChange,v=e.getInputValue(),S=e.value,b=e.getSelection();e.isInputAutofilled(v,b,S,m)&&(S=O(e.maskOptions,""),m={start:0,end:0,length:0}),c&&(m=c.selection,S=c.value,b={start:m.start+v.length,end:m.start+v.length,length:0},v=S.slice(0,m.start)+v+S.slice(m.end),e.beforePasteState=null);var y=le(e.maskOptions,v,b,S,m),X=y.enteredString,D=y.selection,L=y.value;if(I(p)){var A=p({value:L,selection:D},{value:S,selection:m},X,e.getBeforeMaskedValueChangeConfig());L=A.value,D=A.selection}e.setInputValue(L),I(e.props.onChange)&&e.props.onChange(r),e.isWindowsPhoneBrowser?e.setSelection(D.start,D.end,{deferred:!0}):e.setSelection(D.start,D.end)},e.onFocus=function(r){var c=e.props.beforeMaskedValueChange,m=e.maskOptions,p=m.mask,v=m.prefix;if(e.focused=!0,e.mounted=!0,p){if(e.value)E(e.maskOptions,e.value)<e.maskOptions.mask.length&&e.setCursorToEnd();else{var S=O(e.maskOptions,v),b=O(e.maskOptions,S),y=E(e.maskOptions,b),X=q(e.maskOptions,y),D={start:X,end:X};if(I(c)){var L=c({value:b,selection:D},{value:e.value,selection:null},null,e.getBeforeMaskedValueChangeConfig());b=L.value,D=L.selection}var A=b!==e.getInputValue();A&&e.setInputValue(b),A&&I(e.props.onChange)&&e.props.onChange(r),e.setSelection(D.start,D.end)}e.runSaveSelectionLoop()}I(e.props.onFocus)&&e.props.onFocus(r)},e.onBlur=function(r){var c=e.props.beforeMaskedValueChange,m=e.maskOptions.mask;if(e.stopSaveSelectionLoop(),e.focused=!1,m&&!e.props.alwaysShowMask&&z(e.maskOptions,e.value)){var p="";I(c)&&(p=c({value:p,selection:null},{value:e.value,selection:e.previousSelection},null,e.getBeforeMaskedValueChangeConfig()).value);var v=p!==e.getInputValue();v&&e.setInputValue(p),v&&I(e.props.onChange)&&e.props.onChange(r)}I(e.props.onBlur)&&e.props.onBlur(r)},e.onMouseDown=function(r){if(!e.focused&&document.addEventListener){e.mouseDownX=r.clientX,e.mouseDownY=r.clientY,e.mouseDownTime=new Date().getTime();var c=function m(p){if(document.removeEventListener("mouseup",m),e.focused){var v=Math.abs(p.clientX-e.mouseDownX),S=Math.abs(p.clientY-e.mouseDownY),b=Math.max(v,S),y=new Date().getTime()-e.mouseDownTime;(b<=10&&y<=200||b<=5&&y<=300)&&e.setCursorToEnd()}};document.addEventListener("mouseup",c)}I(e.props.onMouseDown)&&e.props.onMouseDown(r)},e.onPaste=function(r){I(e.props.onPaste)&&e.props.onPaste(r),r.defaultPrevented||(e.beforePasteState={value:e.getInputValue(),selection:e.getSelection()},e.setInputValue(""))},e.handleRef=function(r){e.props.children==null&&I(e.props.inputRef)&&e.props.inputRef(r)};var i=n.mask,d=n.maskChar,g=n.formatChars,l=n.alwaysShowMask,u=n.beforeMaskedValueChange,f=n.defaultValue,k=n.value;e.maskOptions=U(i,d,g),f==null&&(f=""),k==null&&(k=f);var h=J(k);if(e.maskOptions.mask&&(l||h)&&(h=O(e.maskOptions,h),I(u))){var C=n.value;n.value==null&&(C=f),h=u({value:h,selection:null},{value:C=J(C),selection:null},null,e.getBeforeMaskedValueChangeConfig()).value}return e.value=h,e}K(a,t);var o=a.prototype;return o.componentDidMount=function(){this.mounted=!0,this.getInputDOMNode()&&(this.isWindowsPhoneBrowser=ue(),this.maskOptions.mask&&this.getInputValue()!==this.value&&this.setInputValue(this.value))},o.componentDidUpdate=function(){var n=this.previousSelection,e=this.props,i=e.beforeMaskedValueChange,d=e.alwaysShowMask,g=e.mask,l=e.maskChar,u=e.formatChars,f=this.maskOptions,k=d||this.isFocused(),h=this.props.value!=null,C=h?J(this.props.value):this.value,r=n?n.start:null;if(this.maskOptions=U(g,l,u),this.maskOptions.mask){!f.mask&&this.isFocused()&&this.runSaveSelectionLoop();var c=this.maskOptions.mask&&this.maskOptions.mask!==f.mask;if(f.mask||h||(C=this.getInputValue()),(c||this.maskOptions.mask&&(C||k))&&(C=O(this.maskOptions,C)),c){var m=E(this.maskOptions,C);(r===null||m<r)&&(r=W(this.maskOptions,C)?m:q(this.maskOptions,m))}!this.maskOptions.mask||!z(this.maskOptions,C)||k||h&&this.props.value||(C="");var p={start:r,end:r};if(I(i)){var v=i({value:C,selection:p},{value:this.value,selection:this.previousSelection},null,this.getBeforeMaskedValueChangeConfig());C=v.value,p=v.selection}this.value=C;var S=this.getInputValue()!==this.value;S?(this.setInputValue(this.value),this.forceUpdate()):c&&this.forceUpdate();var b=!1;p.start!=null&&p.end!=null&&(b=!n||n.start!==p.start||n.end!==p.end),(b||S)&&this.setSelection(p.start,p.end)}else f.mask&&(this.stopSaveSelectionLoop(),this.forceUpdate())},o.componentWillUnmount=function(){this.mounted=!1,this.selectionDeferId!==null&&Q(this.selectionDeferId),this.stopSaveSelectionLoop()},o.render=function(){var n,e=this.props,i=(e.mask,e.alwaysShowMask,e.maskChar,e.formatChars,e.inputRef,e.beforeMaskedValueChange,e.children),d=Z(e,["mask","alwaysShowMask","maskChar","formatChars","inputRef","beforeMaskedValueChange","children"]);if(i){I(i)||B(!1);var g=["onChange","onPaste","onMouseDown","onFocus","onBlur","value","disabled","readOnly"],l=V({},d);g.forEach(function(f){return delete l[f]}),n=i(l),g.filter(function(f){return n.props[f]!=null&&n.props[f]!==d[f]}).length&&B(!1)}else n=M.createElement("input",V({ref:this.handleRef},d));var u={onFocus:this.onFocus,onBlur:this.onBlur};return this.maskOptions.mask&&(d.disabled||d.readOnly||(u.onChange=this.onChange,u.onPaste=this.onPaste,u.onMouseDown=this.onMouseDown),d.value!=null&&(u.value=this.value)),n=M.cloneElement(n,u)},a})(M.Component);return te=fe,te}var ie;function De(){return ie||(ie=1,ee.exports=Oe()),ee.exports}var Pe=De();const Be=be(Pe);export{Fe as $,Be as I};
