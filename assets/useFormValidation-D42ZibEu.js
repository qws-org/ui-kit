import{n as v,m as $,o as g}from"./useFocus-CQXXRA8U.js";import{r as f}from"./index-D4lIrffr.js";function M(n,e,t){let l=v(()=>{t&&t(e)});f.useEffect(()=>{var d;let o=n==null||(d=n.current)===null||d===void 0?void 0:d.form;return o==null||o.addEventListener("reset",l),()=>{o==null||o.removeEventListener("reset",l)}},[n,l])}function I(n,e,t){let{validationBehavior:l,focus:d}=n;$(()=>{if(l==="native"&&(t!=null&&t.current)&&!t.current.disabled){let a=e.realtimeValidation.isInvalid?e.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";t.current.setCustomValidity(a),t.current.hasAttribute("title")||(t.current.title=""),e.realtimeValidation.isInvalid||e.updateValidation(b(t.current))}});let o=f.useRef(!1),s=v(()=>{o.current||e.resetValidation()}),u=v(a=>{var i;e.displayValidation.isInvalid||e.commitValidation();let r=t==null||(i=t.current)===null||i===void 0?void 0:i.form;if(!a.defaultPrevented&&t&&r&&h(r)===t.current){var m;d?d():(m=t.current)===null||m===void 0||m.focus(),g("keyboard")}a.preventDefault()}),c=v(()=>{e.commitValidation()});f.useEffect(()=>{let a=t==null?void 0:t.current;if(!a)return;let i=a.form,r=i==null?void 0:i.reset;return i&&(i.reset=()=>{o.current=!window.event||window.event.type==="message"&&window.event.target instanceof MessagePort,r==null||r.call(i),o.current=!1}),a.addEventListener("invalid",u),a.addEventListener("change",c),i==null||i.addEventListener("reset",s),()=>{a.removeEventListener("invalid",u),a.removeEventListener("change",c),i==null||i.removeEventListener("reset",s),i&&(i.reset=r)}},[t,u,c,s,l])}function p(n){let e=n.validity;return{badInput:e.badInput,customError:e.customError,patternMismatch:e.patternMismatch,rangeOverflow:e.rangeOverflow,rangeUnderflow:e.rangeUnderflow,stepMismatch:e.stepMismatch,tooLong:e.tooLong,tooShort:e.tooShort,typeMismatch:e.typeMismatch,valueMissing:e.valueMissing,valid:e.valid}}function b(n){return{isInvalid:!n.validity.valid,validationDetails:p(n),validationErrors:n.validationMessage?[n.validationMessage]:[]}}function h(n){for(let e=0;e<n.elements.length;e++){let t=n.elements[e];if(!t.validity.valid)return t}return null}export{M as $,I as a};
